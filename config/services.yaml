# config/services.yaml
parameters:

services:
    # Configurația implicită pentru serviciile din *acest* fișier
    _defaults:
        autowire: true      # Injectează automat dependențele în servicii.
        autoconfigure: true # Înregistrează automat serviciile ca și comenzi, event subscribers etc.

    # Face clasele din src/ disponibile pentru a fi folosite ca servicii.
    App\:
        resource: '../src/'
        exclude: '../src/{DependencyInjection,Entity,Kernel.php}'

    # Configurează explicit JwtService pentru a primi cheia secretă a aplicației
    App\Security\JwtService:
        arguments:
            $appSecret: '%kernel.secret%'

    ###> Configurația pentru MinIO / AWS S3 Client ###

    # Configurează clientul AWS S3 pentru a se conecta la MinIO
    Aws\S3\S3Client:
        factory: ['Aws\S3\S3Client', 'factory']
        arguments:
            -   version: 'latest'
                region: 'us-east-1'
                endpoint: '%env(resolve:MINIO_ENDPOINT)%'
                use_path_style_endpoint: true
                credentials:
                    key: '%env(resolve:MINIO_KEY)%'
                    secret: '%env(resolve:MINIO_SECRET)%'

    # Configurează serviciul tău custom, MinioClient
    App\Service\MinioClient:
        arguments:
            $s3Client: '@Aws\S3\S3Client'
            $bucketName: '%env(resolve:MINIO_BUCKET)%'

    ###< Configurația pentru MinIO / AWS S3 Client ###
